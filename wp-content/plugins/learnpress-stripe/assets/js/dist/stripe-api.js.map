{"version":3,"file":"stripe-api.js","mappings":"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ACRrD,IAAI,GAAGyD,IAAI,CAACC,KAAK,CAAEL,CAAC,CAAE,CAAC,CAAE,CAACM,OAAO,CAAE,iBAAiB,EAAE,EAAG,CAAE,CAAC;IAC7D,CAAC,MAAM;MACN3D,IAAI,GAAGyD,IAAI,CAACC,KAAK,CAAE1D,IAAK,CAAC;IAC1B;EACD,CAAC,CAAC,OAAQ4D,CAAC,EAAG;IACb5D,IAAI,GAAG,CAAC,CAAC;EACV;EAEA,OAAOA,IAAI;AACZ,CAAC;;;;;;;;;;;;;;;ACtHD;AACA;AACA,wIAAwI;AACxI;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;;AAEA;AACA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG,GAAG;;AAEN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;;AAGA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA,8BAA8B;;AAE9B;AACA;AACA,GAAG;AACH;;AAEsB;;;;;;;;;;;;;;;;AC1KY;;;;;;;UCAlC;UACA;;UAEA;UACA;UACA;UACA;UACA;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","sources":["webpack://learnpress-stripe/./assets/js/utils.js","webpack://learnpress-stripe/./node_modules/@stripe/stripe-js/dist/index.mjs","webpack://learnpress-stripe/./node_modules/@stripe/stripe-js/lib/index.mjs","webpack://learnpress-stripe/webpack/bootstrap","webpack://learnpress-stripe/webpack/runtime/define property getters","webpack://learnpress-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://learnpress-stripe/webpack/runtime/make namespace object","webpack://learnpress-stripe/./assets/js/stripe-api.js"],"sourcesContent":["/**\n * Fetch API.\n *\n * @param  url\n * @param  data\n * @param  functions\n * @since 4.2.5.1\n * @version 1.0.1\n */\nconst lpFetchAPI = ( url, data = {}, functions = {} ) => {\n\tif ( 'function' === typeof functions.before ) {\n\t\tfunctions.before();\n\t}\n\n\tfetch( url, { method: 'GET', ...data } )\n\t\t.then( ( response ) => response.json() )\n\t\t.then( ( response ) => {\n\t\t\tif ( 'function' === typeof functions.success ) {\n\t\t\t\tfunctions.success( response );\n\t\t\t}\n\t\t} ).catch( ( err ) => {\n\t\t\tif ( 'function' === typeof functions.error ) {\n\t\t\t\tfunctions.error( err );\n\t\t\t}\n\t\t} )\n\t\t.finally( () => {\n\t\t\tif ( 'function' === typeof functions.completed ) {\n\t\t\t\tfunctions.completed();\n\t\t\t}\n\t\t} );\n};\n\n/**\n * Get current URL without params.\n *\n * @since 4.2.5.1\n */\nconst lpGetCurrentURLNoParam = () => {\n\tlet currentUrl = window.location.href;\n\tconst hasParams = currentUrl.includes( '?' );\n\tif ( hasParams ) {\n\t\tcurrentUrl = currentUrl.split( '?' )[ 0 ];\n\t}\n\n\treturn currentUrl;\n};\n\nconst lpAddQueryArgs = ( endpoint, args ) => {\n\tconst url = new URL( endpoint );\n\n\tObject.keys( args ).forEach( ( arg ) => {\n\t\turl.searchParams.set( arg, args[ arg ] );\n\t} );\n\n\treturn url;\n};\n\n/**\n * Listen element viewed.\n *\n * @param  el\n * @param  callback\n * @since 4.2.5.8\n */\nconst listenElementViewed = ( el, callback ) => {\n\tconst observerSeeItem = new IntersectionObserver( function( entries ) {\n\t\tfor ( const entry of entries ) {\n\t\t\tif ( entry.isIntersecting ) {\n\t\t\t\tcallback( entry );\n\t\t\t}\n\t\t}\n\t} );\n\n\tobserverSeeItem.observe( el );\n};\n\n/**\n * Listen element created.\n *\n * @param  callback\n * @since 4.2.5.8\n */\nconst listenElementCreated = ( callback ) => {\n\tconst observerCreateItem = new MutationObserver( function( mutations ) {\n\t\tmutations.forEach( function( mutation ) {\n\t\t\tif ( mutation.addedNodes ) {\n\t\t\t\tmutation.addedNodes.forEach( function( node ) {\n\t\t\t\t\tif ( node.nodeType === 1 ) {\n\t\t\t\t\t\tcallback( node );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t} );\n\n\tobserverCreateItem.observe( document, { childList: true, subtree: true } );\n\t// End.\n};\n\n// Parse JSON from string with content include LP_AJAX_START.\nconst lpAjaxParseJsonOld = ( data ) => {\n\tif ( typeof data !== 'string' ) {\n\t\treturn data;\n\t}\n\n\tconst m = String.raw( { raw: data } ).match( /<-- LP_AJAX_START -->(.*)<-- LP_AJAX_END -->/s );\n\n\ttry {\n\t\tif ( m ) {\n\t\t\tdata = JSON.parse( m[ 1 ].replace( /(?:\\r\\n|\\r|\\n)/g, '' ) );\n\t\t} else {\n\t\t\tdata = JSON.parse( data );\n\t\t}\n\t} catch ( e ) {\n\t\tdata = {};\n\t}\n\n\treturn data;\n};\n\nexport { lpFetchAPI, lpAddQueryArgs, lpGetCurrentURLNoParam, listenElementViewed, listenElementCreated, lpAjaxParseJsonOld };\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"3.4.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","export * from '../dist/index.mjs';\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Stripe js handle payment with form mount from Lib Stripe JS\n *\n * @since 4.0.2\n * @version 1.0.0\n */\nimport { loadStripe } from '@stripe/stripe-js';\nimport { lpAjaxParseJsonOld } from './utils';\n\nconst lpStripe = ( () => {\n\tlet Stripe;\n\tlet elCheckoutForm;\n\tlet elStripeForm, elPageCheckout;\n\tconst idStripeForm = 'lp-stripe-payment-form';\n\tconst idBtnPlaceHolder = 'learn-press-checkout-place-order';\n\tconst idPageCheckout = 'learn-press-checkout';\n\tlet urlHandle;\n\tlet mountStripeDone = false;\n\tlet errorMessage;\n\n\tconst fetchAPI = ( args, callBack = {} ) => {\n\t\tfetch( urlHandle, {\n\t\t\tmethod: 'POST',\n\t\t\t/*headers: {\n\t\t\t\t'X-WP-Nonce': lpGlobalSettings.nonce,\n\t\t\t},*/\n\t\t\tbody: args,\n\t\t} )\n\t\t\t.then( ( res ) => res.text() )\n\t\t\t.then( ( data ) => {\n\t\t\t\tdata = lpAjaxParseJsonOld( data );\n\t\t\t\tcallBack.success( data );\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\tcallBack.completed();\n\t\t\t} )\n\t\t\t.catch( ( err ) => callBack.error( err ) );\n\t};\n\n\t/**\n\t * Load Stripe JS via publish key\n\t * then mount form Stripe\n\t *\n\t * @return {Promise<void>}\n\t */\n\tconst mountFormStripe = async () => {\n\t\ttry {\n\t\t\tStripe = await loadStripe( lpStripeSetting.publish_key || '' );\n\n\t\t\t// Display form Stripe\n\t\t\tconst options = {\n\t\t\t\tclientSecret: lpStripeSetting.publishableKey || '',\n\t\t\t\tappearance: {},\n\t\t\t};\n\t\t\telStripeForm = Stripe.elements( options );\n\n\t\t\t// Create and mount the Payment Element\n\t\t\tconst paymentElement = elStripeForm.create( 'payment' );\n\t\t\tpaymentElement.on( 'loaderror', function( event ) {\n\t\t\t\terrorMessage = event.error.message;\n\t\t\t} );\n\t\t\tpaymentElement.on( 'ready', function( event ) {\n\t\t\t\tmountStripeDone = true;\n\t\t\t} );\n\t\t\tpaymentElement.mount( `#${ idStripeForm }` );\n\t\t} catch ( error ) {\n\t\t\terrorMessage = error.message;\n\t\t}\n\t};\n\n\t/**\n\t * Confirm the PaymentIntent with url has parameter \"payment_intent\"\n\t *\n\t * https://stripe.com/docs/js/payment_intents/confirm_payment\n\t *\n\t * @param  return_url\n\t * @param  callBack\n\t */\n\tconst confirmStripePayment = ( return_url, callBack ) => {\n\t\tif ( typeof Stripe === 'undefined' ) {\n\t\t\tconsole.log( 'Stripe is not defined' );\n\t\t}\n\t\tif ( typeof elStripeForm === 'undefined' ) {\n\t\t\tconsole.log( 'Stripe form not mounted' );\n\t\t}\n\n\t\tStripe.confirmPayment( {\n\t\t\telements: elStripeForm,\n\t\t\tconfirmParams: {\n\t\t\t\treturn_url,\n\t\t\t},\n\t\t} ).then( function( result ) {\n\t\t\tcallBack( result );\n\t\t} );\n\t};\n\tconst setMessageError = ( mess_text ) => {\n\t\tconst elMessage = `<div class=\"learn-press-message error\">${ mess_text }</div>`;\n\t\telPageCheckout.insertAdjacentHTML( 'afterbegin', elMessage );\n\t\telPageCheckout.scrollIntoView( {\n\t\t\tbehavior: 'smooth',\n\t\t} );\n\t};\n\n\treturn {\n\t\tinit: async () => {\n\t\t\tif ( 'undefined' === typeof lpStripeSetting ) {\n\t\t\t\tconsole.log( 'LP Stripe Setting is not defined' );\n\t\t\t}\n\n\t\t\tif ( 'undefined' === typeof lpStripeSetting.payment_stripe_via_iframe ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( 'undefined' !== typeof lpStripeSetting.error ) {\n\t\t\t\tconst elStripeMethod = document.querySelector( '.payment_method_stripe' );\n\t\t\t\tif ( elStripeMethod ) {\n\t\t\t\t\telStripeMethod.insertAdjacentHTML(\n\t\t\t\t\t\t'afterbegin',\n\t\t\t\t\t\t`<span class=\"error\" style=\"color: #e01618\">Error: ${ lpStripeSetting.error }</span>`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telPageCheckout = document.getElementById( idPageCheckout );\n\t\t\telCheckoutForm = document.getElementById( 'learn-press-checkout-form' );\n\t\t\tif ( ! elCheckoutForm ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait mountFormStripe();\n\t\t},\n\t\tevents: () => {\n\t\t\tdocument.addEventListener( 'click', function( e ) {\n\t\t\t\tconst target = e.target;\n\n\t\t\t\tif ( target.id === idBtnPlaceHolder ) {\n\t\t\t\t\tconst elBtnPlaceHolder = target;\n\t\t\t\t\telCheckoutForm = document.getElementById( 'learn-press-checkout-form' );\n\t\t\t\t\tif ( ! elCheckoutForm ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst formData = new FormData( elCheckoutForm );\n\t\t\t\t\tif ( formData.get( 'payment_method' ) !== 'stripe' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif ( ! elPageCheckout ) {\n\t\t\t\t\t\tconsole.error( 'Page checkout is not defined' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst elMes = elPageCheckout.querySelectorAll( '.learn-press-message.error' );\n\t\t\t\t\tif ( elMes.length > 0 ) {\n\t\t\t\t\t\telMes.forEach( ( el ) => {\n\t\t\t\t\t\t\tel.remove();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( 'undefined' !== typeof errorMessage ) {\n\t\t\t\t\t\tsetMessageError( errorMessage );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( 'undefined' === typeof lpStripeSetting.publishableKey ) {\n\t\t\t\t\t\tsetMessageError( 'Stripe Publish Key is generate failed, please check again config key!' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! mountStripeDone ) {\n\t\t\t\t\t\tsetMessageError( 'Stripe payment not load done. Please wait!' );\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Submit form Stripe to check valid fields\n\t\t\t\t\t * https://stripe.com/docs/js/elements/submit\n\t\t\t\t\t *\n\t\t\t\t\t * When check all fields is valid, will submit checkout to create order,\n\t\t\t\t\t * then pass url lp order to confirmStripePayment() to call Stripe API,\n\t\t\t\t\t * Stripe API will return url redirect has parameter \"payment_intent\",\n\t\t\t\t\t * server will catch it and check if payment_intent is valid, LP Order will set to Complete\n\t\t\t\t\t */\n\t\t\t\t\telStripeForm.submit()\n\t\t\t\t\t\t.then( function( result ) {\n\t\t\t\t\t\t\tif ( 'undefined' !== typeof result.error ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telBtnPlaceHolder.classList.add( 'loading' );\n\t\t\t\t\t\t\telBtnPlaceHolder.disabled = true;\n\t\t\t\t\t\t\telBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_processing;\n\n\t\t\t\t\t\t\turlHandle = new URL( lpCheckoutSettings.ajaxurl );\n\t\t\t\t\t\t\turlHandle.searchParams.set( 'lp-ajax', 'checkout' );\n\n\t\t\t\t\t\t\tfetchAPI( formData, {\n\t\t\t\t\t\t\t\tbefore: () => {},\n\t\t\t\t\t\t\t\tsuccess: ( res ) => {\n\t\t\t\t\t\t\t\t\tif ( 'fail' === res.result ) {\n\t\t\t\t\t\t\t\t\t\telBtnPlaceHolder.classList.remove( 'loading' );\n\t\t\t\t\t\t\t\t\t\telBtnPlaceHolder.disabled = false;\n\t\t\t\t\t\t\t\t\t\telBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_place_order;\n\t\t\t\t\t\t\t\t\t\tsetMessageError( res.messages );\n\t\t\t\t\t\t\t\t\t} else if ( 'processing' === res.result ) {\n\t\t\t\t\t\t\t\t\t\telBtnPlaceHolder.innerText = lpCheckoutSettings.i18n_redirecting;\n\t\t\t\t\t\t\t\t\t\tconfirmStripePayment( res.redirect, ( result ) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log( result );\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terror: ( error ) => {},\n\t\t\t\t\t\t\t\tcompleted: () => {},\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t};\n} )();\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tlpStripe.init().then( () => {} );\n} );\n\nlpStripe.events();\n"],"names":["lpFetchAPI","url","data","functions","before","fetch","method","then","response","json","success","catch","err","error","finally","completed","lpGetCurrentURLNoParam","currentUrl","window","location","href","hasParams","includes","split","lpAddQueryArgs","endpoint","args","URL","Object","keys","forEach","arg","searchParams","set","listenElementViewed","el","callback","observerSeeItem","IntersectionObserver","entries","entry","isIntersecting","observe","listenElementCreated","observerCreateItem","MutationObserver","mutations","mutation","addedNodes","node","nodeType","document","childList","subtree","lpAjaxParseJsonOld","m","String","raw","match","JSON","parse","replace","e","loadStripe","lpStripe","Stripe","elCheckoutForm","elStripeForm","elPageCheckout","idStripeForm","idBtnPlaceHolder","idPageCheckout","urlHandle","mountStripeDone","errorMessage","fetchAPI","callBack","body","res","text","mountFormStripe","lpStripeSetting","publish_key","options","clientSecret","publishableKey","appearance","elements","paymentElement","create","on","event","message","mount","confirmStripePayment","return_url","console","log","confirmPayment","confirmParams","result","setMessageError","mess_text","elMessage","insertAdjacentHTML","scrollIntoView","behavior","init","payment_stripe_via_iframe","elStripeMethod","querySelector","getElementById","events","addEventListener","target","id","elBtnPlaceHolder","formData","FormData","get","preventDefault","elMes","querySelectorAll","length","remove","submit","classList","add","disabled","innerText","lpCheckoutSettings","i18n_processing","ajaxurl","i18n_place_order","messages","i18n_redirecting","redirect"],"sourceRoot":""}